{{- $enabled := index .Values "eric-data-object-storage-mn" "enabled" }}
{{- if eq $enabled true }}
{{- if and (index .Values "eric-data-object-storage-mn" "credentials" "accesskey") (index .Values "eric-data-object-storage-mn" "credentials" "secretkey") }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ index .Values "eric-data-object-storage-mn" "credentials" "kubernetesSecretName" }}
type: Opaque
stringData:
  # For custom user and password
  accesskey: {{ index .Values "eric-data-object-storage-mn" "credentials" "accesskey" }}
  secretkey: {{ index .Values "eric-data-object-storage-mn" "credentials" "secretkey" }}
{{- end }}
{{- end }}
