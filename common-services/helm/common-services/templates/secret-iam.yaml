{{- $enabled := index .Values "eric-sec-access-mgmt" "enabled" }}
{{- if eq $enabled true }}
{{- $secname := index .Values "eric-sec-access-mgmt" "statefulset" "adminSecret" }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ index .Values "eric-sec-access-mgmt" "statefulset" "adminSecret" }}
  labels:
    app: {{ index .Values "eric-sec-access-mgmt" "statefulset" "adminSecret" }}
type: Opaque
stringData: #data:
  # For custom user and password
  pguserid: {{ .Values.credentials.iam.db.user | b64enc | quote }} 
  pgpasswd: {{ .Values.credentials.iam.db.pwd | b64enc | quote }}
  kcadminid: {{ .Values.credentials.iam.kcadminid | b64enc | quote }}
  kcpasswd: {{ .Values.credentials.iam.kcpasswd | b64enc | quote }}
{{- end }}
