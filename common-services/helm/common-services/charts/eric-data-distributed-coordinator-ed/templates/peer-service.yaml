apiVersion: v1
kind: Service
metadata:
  name: {{ template "eric-data-distributed-coordinator-ed.name" . }}-peer
  labels:
{{- include "eric-data-distributed-coordinator-ed.labels" . | indent 2 }}
  annotations:
{{- include "eric-data-distributed-coordinator-ed.productinfo" . | indent 4 }}
{{- include "eric-data-distributed-coordinator-ed.config-annotations" . | indent 4 }}
spec:
{{- if (include "eric-data-distributed-coordinator-ed.internalIPFamily.global" .) }}
  # ipFamilies was introduced in K8s v1.20
  ipFamilies: [{{- include "eric-data-distributed-coordinator-ed.internalIPFamily.global" . | quote }}]
{{- end }}
  publishNotReadyAddresses: true
  clusterIP: None
  ports:
    - port: {{ include "eric-data-distributed-coordinator-ed.ports.peer" . }}
      name: peer-port
  selector:
{{- include "eric-data-distributed-coordinator-ed.selectorLabels" . | indent 2 }}
