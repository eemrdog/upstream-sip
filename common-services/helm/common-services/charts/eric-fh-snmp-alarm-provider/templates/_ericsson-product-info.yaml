
{{/*
Create annotation for the product information (DR-D1121-064)
*/}}
{{- define "eric-fh-snmp-alarm-provider.product-info" }}
ericsson.com/product-name: {{ (fromYaml (.Files.Get "eric-product-info.yaml")).productName | quote }}
ericsson.com/product-number: {{ (fromYaml (.Files.Get "eric-product-info.yaml")).productNumber | quote }}
ericsson.com/product-revision: {{ regexReplaceAll "(.*)[+|-].*" .Chart.Version "${1}" | quote }}
{{- end -}}
{{/*
The helm chart version is usually in the format X.Y.Z[-+]<hash or
number>, however we are only interested in the chars before '-' or
'+'. For example the result of '1.1.0-13' or '1.1.0+13' or
'1.1.0-aertfd' must be: '1.1.0'
ericsson.com/product-revision: {{ regexReplaceAll "[\\-\\+].+" .Chart.Version "${1}" }}
*/}}

