{{- if .Values.podDisruptionBudget -}}
{{- if .Values.podDisruptionBudget.maxUnavailable -}}
apiVersion: {{ ternary "policy/v1" "policy/v1" (.Capabilities.APIVersions.Has "policy/v1") }}
kind: PodDisruptionBudget
metadata:
  name: {{ include "eric-log-transformer.fullname" . }}-pdb
  labels:
{{- include "eric-log-transformer.labels" . | indent 4 }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
    app: {{ include "eric-log-transformer.fullname" . | quote }}
    chart: {{ include "eric-log-transformer.chart" . | quote }}
  annotations:
    {{- include "eric-log-transformer.annotations" . | indent 4 }}
spec:
  maxUnavailable: {{ .Values.podDisruptionBudget.maxUnavailable }}
  selector:
    matchLabels:
      app: {{ include "eric-log-transformer.fullname" . | quote }}
{{- end }}
{{- end }}
