{{- $sipoauth2 := eq (include "eric-sec-access-mgmt.sipoauth2.enabled" .) "true" -}}
{{ if $sipoauth2 }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: "{{ template "eric-sec-access-mgmt.name" . }}-log-control-config"
  labels: {{- include "eric-sec-access-mgmt.labels" . | nindent 4 }}
  annotations: {{- include "eric-sec-access-mgmt.common-annotations" . | nindent 4 }}
data:
  # Keys in the json should follow same syntactical rules as with Python variables
  logcontrol.json: |-
    [
        {
          "container": "eric-sec-access-mgmt-sip-oauth2",
          "severity": {{ .Values.logLevel | quote }}
        }
    ]
{{ end }}
