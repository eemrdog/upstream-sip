{{- if eq .Values.persistence.type "pvc" }}

! Warning: using file-based backend is not supported nor considered production grade. Please use Distributed Coordinator ED service instead.

{{- end }}

Installation of "{{ .Chart.Name }}" is complete and the deployment is named "{{ .Release.Name }}" in the namespace "{{ .Release.Namespace }}".

I. Verifying {{ .Chart.Name }} deployment

The deployment can be manually verified using the following commands:

VAULT_POD=$(kubectl get po --namespace {{ .Release.Namespace }} -l app={{ template "eric-sec-key-management.name" . }} -o go-template --template {{"'{{range .items}}{{.metadata.name}}{{end}}'"}})
kubectl exec -n {{ .Release.Namespace }} -it $VAULT_POD -c kms -- sh -c "curl http://localhost:8202/v1/sys/health"

II. CLEANUP:

Delete the deployment:
helm uninstall {{ .Release.Name }}

{{- if eq .Values.persistence.type "pvc" }}

Delete the permanent storage:
kubectl delete pvc {{ template "eric-sec-key-management.name" . }}-pvc --namespace {{ .Release.Namespace }}

{{- end }}


####

The Key Management Service (KMS) *must* be deployed with the Service Identity Provider TLS (SIP-TLS) and the Distributed Coordinator ED (DCED) in the same namespace.
This means that in addition to the deployment prerequisites of KMS, also the prerequisites of SIP-TLS and DCED must hold, otherwise the KMS installation will fail.

For further instructions, see
*Key Management User Guide* (1/1553-APR 201 29/2)
*Service Identity Provider TLS User Guide* (1/1553-APR 201 36/2)
*Distributed Coordinator ED User Guide (1/1553-APR 201 59/2)
