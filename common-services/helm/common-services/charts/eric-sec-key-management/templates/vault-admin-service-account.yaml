# Service account that can be used to fetch credentials from vault

apiVersion: v1
kind: ServiceAccount
metadata:
  name: {{ template "eric-sec-key-management.name" . }}-admin
  labels:
    {{- include "eric-sec-key-management.labels" . | nindent 4 }}
  annotations:
    {{- include "eric-sec-key-management.product-info" . | indent 4 }}

---

# Explicitly created secret that refers above service account.
# Will be populated with the service account token.

apiVersion: v1
kind: Secret
metadata:
  name: {{ template "eric-sec-key-management.name" . }}-admin
  labels:
    {{- include "eric-sec-key-management.labels" . | nindent 4 }}
  annotations:
    {{- include "eric-sec-key-management.product-info" . | indent 4 }}
    kubernetes.io/service-account.name: {{ template "eric-sec-key-management.name" . }}-admin
type: kubernetes.io/service-account-token